---
import MainLayout from "../../../layouts/MainLayout.astro";
import CategoryHeader from "../../../components/Categories/CategoryHeader.astro";
import CategoryBody from "../../../components/Categories/CategoryBody.astro";
import { formatBlogPosts } from "../../../script/utils";
import { getCollection, type CollectionEntry } from "astro:content";
import Pagination from "../../../components/Pagination.astro";

export async function getStaticPaths({ paginate }: any) {
  const blogPosts = await getCollection("blog", ({ data }) => {
    return data.category.some((cat) => cat === "Symbols");
  });
  const formattedPosts = formatBlogPosts(blogPosts, {
    filterOutDrafts: true,
  });

  return paginate(formattedPosts, { pageSize: 3 });
}

interface Props {
  data: CollectionEntry<"blog">[];
  start: number;
  end: number;
  size: number;
  total: number;
  currentPage: number;
  lastPage: number;
  url: {
    current: string | undefined;
    next: string | undefined;
    prev: string | undefined;
  };
}

const { page } = Astro.props as { page?: Props };
const { prev, next } = page?.url || {};

const description =
  "A treasure trove of ancient and mystical emblems that have played a significant role in mythological narratives throughout history. Here, we delve into the profound meanings and cultural significance behind these symbols, unlocking the hidden stories and wisdom they carry. From the iconic trident of Poseidon to the enigmatic Eye of Horus, we explore symbols that have shaped cultures, beliefs, and legends across the ages.";
---

<MainLayout title="Symbols - Category" {description}>
  <section class="comp taxonomysc mntl-taxonomysc">
    <CategoryHeader
      title="Symbols"
      image="/images/symbols-banner.webp"
      {description}
    />
    <CategoryBody posts={page?.data} />
    <Pagination {prev} {next} />
  </section>
</MainLayout>

<style>
  /* section class="comp taxonomysc mntl-taxonomysc" */
  .taxonomysc {
    padding: 0;
  }
</style>
